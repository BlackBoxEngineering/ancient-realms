[defname AncientRealms_MoonGate_Locations]
MG_Britain_1 1336,1996,5,0		//Britain
MG_BDen_2 2711,2236,0,0			//Bucaneer's den
MG_Cove_3 2286,1210,0,0			//Cove
MG_Jhelom_4 1499,3771,5,0		//Jhelom
MG_Minoc_5 2701,692,5,0			//Minoc/Vesper
MG_Moonglow_6 4467,1283,5,0		//Moonglow
MG_Nujelm_7 3634,1204,0,0		//Nujel'm
MG_Serpents 3032,3383,15,0		//Serpents hold
MG_Skara_9 643,2067,5,0			//Skara brae
MG_Trinsic_10 1828,2948,-20,0	//Trinsic
MG_Yew_11 771,752,5,0			//Yew
MG_Wind_12 1361,895,0,0			//Wind
MG_Magincia_13 3563,1639,34,0	//Magincia
MG_FernBank 3563,1639,34,0		//FernBank
MG_Astalon 1499,2234,5,0		//Astalon
MG_HouseShow 5884,1723,5,0		//Astalon

MG_OutPost_Britain 1338,1741,20
MG_OutPost_Cove 2294,1180,21

[ITEMDEF i_MoonGate_TIMER]
DEFNAME=i_MoonGate_TIMER
ID=0f6c
NAME=MoonGate TIMER
TYPE=t_eq_script
LAYER=layer_special

ON=@CREATE
	ATTR=ATTR_NEWBIE|ATTR_DECAY|ATTR_MOVE_NEVER
	TIMER=12

ON=@TIMER
	REMOVE
	RETURN 1

[ITEMDEF i_MoonGate_COUNTER]
DEFNAME=i_MoonGate_COUNTER
ID=0f6c
NAME=Moongate COUNTER
TYPE=t_eq_script
LAYER=layer_special

ON=@CREATE
	ATTR=ATTR_NEWBIE|ATTR_DECAY|ATTR_MOVE_NEVER
	TIMER=1
	
ON=@TIMER
	IF <CONT.FINDID.i_MoonGate_TIMER.TIMER> = 0
		IF <CONT.ISNEARTYPE t_AncientRealmsMoonGate 3>
			CONT.GO <TAG.Goto>
			CONT.SFX 511
			CONT.SYSMESSAGE @55 You have been ported!
			CONT.CTAG.MoonGateMenu=
		ELSE
			CONT.SYSMESSAGE @63 You were to far away from the Moongate!
			CONT.SYSMESSAGE @0029 Teleport Cancelled!
			CONT.CTAG.MoonGateMenu=
		ENDIF
		IF <CONT.FINDID.i_MoonGate_TIMER>
			CONT.FINDID.i_MoonGate_TIMER.REMOVE
		ENDIF
		REMOVE
		RETURN 1
	ELSE
		CONT.SAY @95 <CONT.FINDID.i_MoonGate_TIMER.TIMER>
		CONT.EFFECT=3,i_fx_sparkle_2,20,17,13
		CONT.SFX 507
	ENDIF
	TIMER=1
	RETURN 1

[FUNCTION f_moongateInterupt]
REF1=<SERV.UID.<ARGV[0]>>
IF <REF1.FINDID.i_MoonGate_TIMER>
	REF1.FINDID.i_MoonGate_TIMER.REMOVE
	REF1.SYSMESSAGE @63,,1 MoonGating Interupted!
	REF1.SYSMESSAGE @0029,,1 Teleport Cancelled!
	REF1.CTAG.MoonGateMenu=
ENDIF

[TYPEDEF t_AncientRealmsMoonGate]
ON=@DClick
	IF <SRC.ISPLAYER>
		IF !<CTAG.MoonGateMenu>
			SDIALOG d_moongate_AncientRealms
			CTAG.MoonGateMenu=d_moongate_AncientRealms
		ELSE
			SDIALOG <CTAG.MoonGateMenu>
		ENDIF
	ENDIF
	RETURN 1
	
ON=@Step
	IF !<SRC.FINDID.i_MoonGate_TIMER> && <SRC.ISPLAYER>
		IF !<SRC.CTAG0.MoonGateMenu>
			EFFECT=3,i_fx_sparkle_2,20,17,13
			SFX 507
			SRC.CTAG.MoonGateMenu="d_moongate_AncientRealms"
			SDIALOG <SRC.CTAG.MoonGateMenu>
		ELSE
			SDIALOG <SRC.CTAG0.MoonGateMenu>
		ENDIF
	ENDIF
	RETURN 1

[FUNCTION MoonGatePortPlayer]
IF <ISNEARTYPE t_AncientRealmsMoonGate 3>
	IF !<FINDID.i_MoonGate_COUNTER>
		EMOTE Shiver
		NEWITEM i_MoonGate_TIMER, 1, <UID>
		IF <ISGM>
			NEW.TIMER=2
		ELSE
			NEW.TIMER=12
		ENDIF
		NEWITEM i_MoonGate_COUNTER, 1, <UID>
	ENDIF
ELSE
	SYSMESSAGE @0029 Your to far from the moongate to port!
ENDIF
	
[ITEMDEF i_moongate_AncientRealms]
DEFNAME=i_moongate_AncientRealms
NAME=Public Moongate
ID=0f6c
TYPE=t_AncientRealmsMoonGate
CATEGORY=AncientRealms
SUBSECTION=Public Teleporters
DESCRIPTION=Blue Moongate 

[DIALOG d_moongate_AncientRealms]
50,50
PAGE 0
RESIZEPIC 0 0 83 270 205
DORAND 9
	GUMPPIC 10 13 30501 0
	GUMPPIC 10 13 30502 0
	GUMPPIC 10 13 30503 0
	GUMPPIC 10 13 30504 0
	GUMPPIC 10 13 30505 0
	GUMPPIC 10 13 30506 0
	GUMPPIC 10 13 30507 0
	GUMPPIC 10 13 30508 0
	GUMPPIC 10 13 30509 0
	GUMPPIC 10 13 305010 0
ENDDO
DTEXT 140 20 95 ANCIENT REALMS

PAGE 1
BUTTON 142 50 4005 4007 0 2 10
DTEXT 177 51 324 TOWNS
BUTTON 142 80 4005 4007 0 3 10
DTEXT 177 81 324 OUTPOSTS
BUTTON 142 110 4005 4007 0 4 10
DTEXT 177 111 324 KEEPS
BUTTON 142 140 4005 4007 0 5 10
DTEXT 177 141 324 GATE MAP
DTEXT 140 172 95 MOONGATE MENU

PAGE 2
RESIZEPIC 0 0 83 270 305
DORAND 9
	GUMPPIC 10 13 30501 0
	GUMPPIC 10 13 30502 0
	GUMPPIC 10 13 30503 0
	GUMPPIC 10 13 30504 0
	GUMPPIC 10 13 30505 0
	GUMPPIC 10 13 30506 0
	GUMPPIC 10 13 30507 0
	GUMPPIC 10 13 30508 0
	GUMPPIC 10 13 30509 0
	GUMPPIC 10 13 305010 0
ENDDO
BUTTON 142 20 4005 4007 1 0 20
IF <SERV.UID.<EVAL TS_Astalon>.TAG0.Invasion>
	DTEXT 177 21 33 ASTALON
ELSE
	DTEXT 177 21 92 ASTALON
ENDIF
BUTTON 142 50 4005 4007 1 0 21
IF <SERV.UID.<EVAL TS_BritCastle>.TAG0.Invasion>
	DTEXT 177 51 33 BRITAIN
ELSE
	DTEXT 177 51 92 BRITAIN
ENDIF
BUTTON 142 80 4005 4007 1 0 22
DTEXT 177 81 92 JHELOM
BUTTON 142 110 4005 4007 1 0 23
IF <SERV.UID.<EVAL TS_Magincia>.TAG0.Invasion>
	DTEXT 177 111 33 MAGINCIA
ELSE
	DTEXT 177 111 92 MAGINCIA
ENDIF
BUTTON 142 140 4005 4007 1 0 24
IF <SERV.UID.<EVAL TS_Minoc>.TAG0.Invasion>
	DTEXT 177 141 33 MINOC
ELSE
	DTEXT 177 141 92 MINOC
ENDIF
BUTTON 142 170 4005 4007 1 0 25
IF <SERV.UID.<EVAL TS_MoonGlow>.TAG0.Invasion>
	DTEXT 177 171 33 MOONGLOW
ELSE
	DTEXT 177 171 92 MOONGLOW
ENDIF
BUTTON 142 200 4005 4007 1 0 26
IF <SERV.UID.<EVAL TS_Skara>.TAG0.Invasion>
	DTEXT 177 201 33 SKARA BRAE
ELSE
	DTEXT 177 201 92 SKARA BRAE
ENDIF
BUTTON 142 230 4005 4007 1 0 27
IF <SERV.UID.<EVAL TS_Trinsic>.TAG0.Invasion>
	DTEXT 177 231 33 TRINSIC
ELSE
	DTEXT 177 231 92 TRINSIC
ENDIF
BUTTON 142 260 4005 4007 1 0 28
IF <SERV.UID.<EVAL TS_Trinsic>.TAG0.Invasion>
	DTEXT 177 261 33 YEW
ELSE
	DTEXT 177 261 92 YEW
ENDIF
BUTTON 22 230 4005 4007 1 0 29
DTEXT 57 231 33 FERNBANK
BUTTON 22 260 4005 4007 1 0 30
DTEXT 57 261 33 SERPENTS
BUTTON 42 200 5603 5605 0 1 10
DTEXT 60 198 95 BACK

PAGE 3
RESIZEPIC 0 0 83 300 205
DORAND 9
	GUMPPIC 10 13 30501 0
	GUMPPIC 10 13 30502 0
	GUMPPIC 10 13 30503 0
	GUMPPIC 10 13 30504 0
	GUMPPIC 10 13 30505 0
	GUMPPIC 10 13 30506 0
	GUMPPIC 10 13 30507 0
	GUMPPIC 10 13 30508 0
	GUMPPIC 10 13 30509 0
	GUMPPIC 10 13 305010 0
ENDDO
BUTTON 142 20 4005 4007 1 0 31
IF <SERV.UID.<EVAL TS_BritCastle>.TAG0.Invasion>
	DTEXT 177 21 33 BRITAIN OUTPOST
ELSE
	DTEXT 177 21 92 BRITAIN OUTPOST
ENDIF
BUTTON 142 50 4005 4007 1 0 32
IF <SERV.UID.<EVAL TS_Cove>.TAG0.Invasion>
	DTEXT 177 51 33 COVE OUTPOST
ELSE
	DTEXT 177 51 92 COVE OUTPOST
ENDIF
BUTTON 180 150 5603 5605 0 1 10
DTEXT 198 148 95 BACK

PAGE 4
RESIZEPIC 0 0 83 320 335
DORAND 9
	GUMPPIC 10 13 30501 0
	GUMPPIC 10 13 30502 0
	GUMPPIC 10 13 30503 0
	GUMPPIC 10 13 30504 0
	GUMPPIC 10 13 30505 0
	GUMPPIC 10 13 30506 0
	GUMPPIC 10 13 30507 0
	GUMPPIC 10 13 30508 0
	GUMPPIC 10 13 30509 0
	GUMPPIC 10 13 305010 0
ENDDO
IF (<SRC.GUILD>)||(<SRC.GM>))
	SRC.CTAG.GuildUID=<SRC.GUILD.UID>
	BUTTON 142 20 4005 4007 1 0 33
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_Astalon>.TAG.OwnersUid>)
		DTEXT 177 21 451 ASTALON KEEP
	ELSE
		DTEXT 177 21 63 ASTALON KEEP
	ENDIF
	BUTTON 142 50 4005 4007 1 0 34
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_BritCastle>.TAG.OwnersUid>)
		DTEXT 177 51 451 BRITAIN KEEP
	ELSE
		DTEXT 177 51 63 BRITAIN KEEP
	ENDIF
	BUTTON 142 80 4005 4007 1 0 35
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_Buccaneers>.TAG.OwnersUid>)
		DTEXT 177 81 451 BUCCANEERS KEEP
	ELSE
		DTEXT 177 81 63 BUCCANEERS KEEP
	ENDIF
	BUTTON 142 110 4005 4007 1 0 36
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_Cove>.TAG.OwnersUid>)
		DTEXT 177 111 451 COVE KEEP
	ELSE
		DTEXT 177 111 63 COVE KEEP
	ENDIF
	BUTTON 142 140 4005 4007 1 0 37
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_Magincia>.TAG.OwnersUid>)
		DTEXT 177 141 451 MAGINCIA KEEP
	ELSE
		DTEXT 177 141 63 MAGINCIA KEEP
	ENDIF
	BUTTON 142 170 4005 4007 1 0 38
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_Minoc>.TAG.OwnersUid>)
		DTEXT 177 171 451 MINOC KEEP
	ELSE
		DTEXT 177 171 63 MINOC KEEP
	ENDIF
	BUTTON 142 200 4005 4007 1 0 39
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_MoonGlow>.TAG.OwnersUid>)
		DTEXT 177 201 451 MOONGLOW KEEP
	ELSE
		DTEXT 177 201 63 MOONGLOW KEEP
	ENDIF
	BUTTON 142 230 4005 4007 1 0 40
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_Skara>.TAG.OwnersUid>)
		DTEXT 177 231 451 SKARA BRAE KEEP
	ELSE
		DTEXT 177 231 63 SKARA BRAE KEEP
	ENDIF
	BUTTON 142 260 4005 4007 1 0 41
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_Trinsic>.TAG.OwnersUid>)
		DTEXT 177 261 451 TRINSIC KEEP
	ELSE
		DTEXT 177 261 63 TRINSIC KEEP
	ENDIF
	BUTTON 142 290 4005 4007 1 0 42
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_Yew>.TAG.OwnersUid>)
		DTEXT 177 291 451 YEW KEEP
	ELSE
		DTEXT 177 291 63 YEW KEEP
	ENDIF
ELSE
	BUTTON 142 20 4005 4007 0 4 10
	DTEXT 177 21 1213 ASTALON KEEP
	BUTTON 142 50 4005 4007 0 4 10
	DTEXT 177 51 1213 BRITAIN KEEP
	BUTTON 142 80 4005 4007 0 4 10
	DTEXT 177 81 1213 BUCCANEERS KEEP
	BUTTON 142 110 4005 4007 0 4 10
	DTEXT 177 111 1213 COVE KEEP
	BUTTON 142 140 4005 4007 0 4 10
	DTEXT 177 141 1213 MAGINCIA KEEP
	BUTTON 142 170 4005 4007 0 4 10
	DTEXT 177 171 1213 MINOC KEEP
	BUTTON 142 200 4005 4007 0 4 10
	DTEXT 177 201 1213 MOONGLOW KEEP
	BUTTON 142 230 4005 4007 0 4 10
	DTEXT 177 231 1213 SKARA BRAE KEEP
	BUTTON 142 260 4005 4007 0 4 10
	DTEXT 177 261 1213 TRINSIC KEEP
	BUTTON 142 290 4005 4007 0 4 10
	DTEXT 177 291 1213 YEW KEEP
	DTEXT 10 205 1123 You need to be in
	DTEXT 10 220 1123 a guild to capture
	DTEXT 10 235 1123 a keep and you need
	DTEXT 10 250 1123 ownership of a keep
	DTEXT 10 265 1123 to moongate inside.
ENDIF
BUTTON 42 290 5603 5605 0 1 10
DTEXT 60 288 95 BACK

PAGE 5
resizepic 0 0 5120 403 434
gumppic 10 10 5528 // 115
BUTTON 128 220 2360 2361 1 0 20		// Astalon
BUTTON 110 197 2360 2361 1 0 21		// Britian
BUTTON 122 363 2360 2361 1 0 22		// Jhelom
BUTTON 275 210 2360 2361 1 0 23		// Magincia
BUTTON 213 73 2360 2361 1 0 24		// Minoc
BUTTON 342 131 2360 2361 1 0 25		// Moonglow
BUTTON 57 202 2360 2361 1 0 26		// Skara Brae
BUTTON 147 285 2360 2361 1 0 27		// Trinsnic
BUTTON 65 83 2360 2361 1 0 28		// Yew
BUTTON 109 135 2360 2361 1 0 29		// FernBank
BUTTON 235 320 2360 2361 1 0 30		// Serpents

[DIALOG d_moongate_AncientRealms BUTTON]
ONBUTTON=20
	SRC.SYSMESSAGE @55,,1 Travelling to Astalon
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=1571,2231,10
	SRC.CTAG.MoonGateMenu=d_moongate_AncientRealms
ONBUTTON=21
	SRC.SYSMESSAGE @55,,1 Travelling to Britian
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=Britain Moongate
	SRC.CTAG.MoonGateMenu=d_moongate_AncientRealms
ONBUTTON=22
	SRC.SYSMESSAGE @55,,1 Travelling to Jhelom
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=Jhelom Moongate
	SRC.CTAG.MoonGateMenu=d_moongate_AncientRealms
ONBUTTON=23
	SRC.SYSMESSAGE @55,,1 Travelling to Magincia
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=Magincia Moongate
	SRC.CTAG.MoonGateMenu=d_moongate_AncientRealms
ONBUTTON=24
	SRC.SYSMESSAGE @55,,1 Travelling to Minoc
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=Minoc-Vesper Moongate
	SRC.CTAG.MoonGateMenu=d_moongate_AncientRealms
ONBUTTON=25
	SRC.SYSMESSAGE @55,,1 Travelling to Moonglow
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=Moonglow Moongate
	SRC.CTAG.MoonGateMenu=d_moongate_AncientRealms
ONBUTTON=26
	SRC.SYSMESSAGE @55,,1 Travelling to Skara Brae
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=Skara Brae Moongate
	SRC.CTAG.MoonGateMenu=d_moongate_AncientRealms
ONBUTTON=27
	SRC.SYSMESSAGE @55,,1 Travelling to Trinsnic
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=1828,2948,-20
	SRC.CTAG.MoonGateMenu=d_moongate_AncientRealms
ONBUTTON=28
	SRC.SYSMESSAGE @55,,1 Travelling to Yew
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=Yew Moongate
	SRC.CTAG.MoonGateMenu=d_moongate_AncientRealms
ONBUTTON=29
	SRC.SYSMESSAGE @55,,1 Travelling to FernBank
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=1345,1342,5
	SRC.CTAG.MoonGateMenu=d_moongate_AncientRealms
ONBUTTON=30
	SRC.SYSMESSAGE @55,,1 Travelling to Serpents
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=3032,3383,15
	SRC.CTAG.MoonGateMenu=d_moongate_AncientRealms
ONBUTTON=31
	SRC.SYSMESSAGE @55,,1 Travelling to Britian Outpost
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=1338,1741,20
	SRC.CTAG.MoonGateMenu=d_moongate_AncientRealms
ONBUTTON=32
	SRC.SYSMESSAGE @55,,1 Travelling to Cove Outpost
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=2294,1180,21
	SRC.CTAG.MoonGateMenu=d_moongate_AncientRealms
	
ONBUTTON=33
//KS_Astalon 04002f55b			*** 1250,2344,103
IF <SRC.ISGM>
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=1250,2344,103
	RETURN 1
ELSE
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_Astalon>.TAG0.OwnersUid>)
		SRC.SYSMESSAGE @55,,1 Your Guild Does Not Control This Keep!
		RETURN 1
	ELSE
		SRC.SYSMESSAGE @55,,1 Travelling to Astalon Keep
		SRC.MoonGatePortPlayer
		SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=1250,2344,103
		RETURN 1
	ENDIF
ENDIF
SRC.CTAG.MoonGateMenu=d_moongate_keeps

ONBUTTON=34
//KS_BritCastle 04005ec72	*** 1364,1625,94
IF <SRC.ISGM>
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=1364,1625,94
	RETURN 1
ELSE
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_BritCastle>.TAG0.OwnersUid>)
		SRC.SYSMESSAGE @55,,1 Your Guild Does Not Control This Keep!
		RETURN 1
	ELSE
		SRC.SYSMESSAGE @55,,1 Travelling to Britain Keep
		SRC.MoonGatePortPlayer
		SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=1364,1625,94
		RETURN 1
	ENDIF
ENDIF
SRC.CTAG.MoonGateMenu=d_moongate_keeps

ONBUTTON=35
//KS_Buccaneers 04004408b	*** 2930,2168,30
IF <SRC.ISGM>
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=2930,2168,30
	RETURN 1
ELSE
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_Buccaneers>.TAG0.OwnersUid>)
		SRC.SYSMESSAGE @55,,1 Your Guild Does Not Control This Keep!
		RETURN 1
	ELSE
		SRC.SYSMESSAGE @55,,1 Travelling to Buccaneers Keep
		SRC.MoonGatePortPlayer
		SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=2930,2168,30
		RETURN 1
	ENDIF
ENDIF
SRC.CTAG.MoonGateMenu=d_moongate_keeps

ONBUTTON=36
//KS_Cove 04005ec9f			*** 2180,1192,100
IF <SRC.ISGM>
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=2180,1192,100
	RETURN 1
ELSE
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_Cove>.TAG0.OwnersUid>)
		SRC.SYSMESSAGE @55,,1 Your Guild Does Not Control This Keep!
		RETURN 1
	ELSE
		SRC.SYSMESSAGE @55,,1 Travelling to Cove Keep
		SRC.MoonGatePortPlayer
		SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=2180,1192,100
		RETURN 1
	ENDIF
ENDIF
SRC.CTAG.MoonGateMenu=d_moongate_keeps

ONBUTTON=37
//KS_Magincia 04005ec4f		*** 3667,2325,15
IF <SRC.ISGM>
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=3667,2325,15
	RETURN 1
ELSE
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_Magincia>.TAG0.OwnersUid>)
		SRC.SYSMESSAGE @55,,1 Your Guild Does Not Control This Keep!
		RETURN 1
	ELSE
		SRC.SYSMESSAGE @55,,1 Travelling to Magincia Keep
		SRC.MoonGatePortPlayer
		SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=3667,2325,15
		RETURN 1
	ENDIF
ENDIF
SRC.CTAG.MoonGateMenu=d_moongate_keeps

ONBUTTON=38
//KS_Minoc 04005ec5a		*** 2560,422,15
IF <SRC.ISGM>
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=2560,422,15
	RETURN 1
ELSE
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_Minoc>.TAG0.OwnersUid>)
		SRC.SYSMESSAGE @55,,1 Your Guild Does Not Control This Keep!
		RETURN 1
	ELSE
		SRC.SYSMESSAGE @55,,1 Travelling to Minoc Keep
		SRC.MoonGatePortPlayer
		SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=2560,422,15
		RETURN 1
	ENDIF
ENDIF
SRC.CTAG.MoonGateMenu=d_moongate_keeps

ONBUTTON=39
//KS_MoonGlow 04005ee41		*** 4481,1404,23
IF <SRC.ISGM>
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=4481,1404,23
	RETURN 1
ELSE
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_MoonGlow>.TAG0.OwnersUid>)
		SRC.SYSMESSAGE @55,,1 Your Guild Does Not Control This Keep!
		RETURN 1
	ELSE
		SRC.SYSMESSAGE @55,,1 Travelling to Moonglow Keep
		SRC.MoonGatePortPlayer
		SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=4481,1404,23
		RETURN 1
	ENDIF
ENDIF
SRC.CTAG.MoonGateMenu=d_moongate_keeps

ONBUTTON=40
//KS_Skara 04005ec27		*** 464,2067,-1
IF <SRC.ISGM>
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=464,2067,-1
	RETURN 1
ELSE
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_Skara>.TAG0.OwnersUid>)
		SRC.SYSMESSAGE @55,,1 Your Guild Does Not Control This Keep!
		RETURN 1
	ELSE
		SRC.SYSMESSAGE @55,,1 Travelling to Skara Brae Keep
		SRC.MoonGatePortPlayer
		SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=464,2095,-1
		RETURN 1
	ENDIF
ENDIF
SRC.CTAG.MoonGateMenu=d_moongate_keeps

ONBUTTON=41
//KS_Trinsic 04005ec34		*** 1742,2702,10
IF <SRC.ISGM>
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=1742,2702,10
	RETURN 1
ELSE
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_Trinsic>.TAG0.OwnersUid>)
		SRC.SYSMESSAGE @55,,1 Your Guild Does Not Control This Keep!
		RETURN 1
	ELSE
		SRC.SYSMESSAGE @55,,1 Travelling to Trinsic Keep
		SRC.MoonGatePortPlayer
		SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=1742,2702,10
		RETURN 1
	ENDIF
ENDIF
SRC.CTAG.MoonGateMenu=d_moongate_keeps

ONBUTTON=42
//KS_Yew 04005ebd8			*** 366,860,40
IF <SRC.ISGM>
	SRC.MoonGatePortPlayer
	SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=366,860,40
	RETURN 1
ELSE
	IF !(strmatch(*<SRC.CTAG0.GuildUID>*,<SERV.UID.<EVAL KS_Yew>.TAG0.OwnersUid>)
		SRC.SYSMESSAGE @55,,1 Your Guild Does Not Control This Keep!
		RETURN 1
	ELSE
		SRC.SYSMESSAGE @55,,1 Travelling to Yew Keep
		SRC.MoonGatePortPlayer
		SRC.FINDID.i_MoonGate_COUNTER.TAG.Goto=366,860,40
		RETURN 1
	ENDIF
ENDIF
SRC.CTAG.MoonGateMenu=d_moongate_keeps


[EOF]

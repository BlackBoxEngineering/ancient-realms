[DIALOG d_VendorMenu]
50,50
PAGE 0
RESIZEPIC 0 0 5120 270 230
RESIZEPIC 20 20 5054 230 200

PAGE 1
RESIZEPIC 25 107 9500 220 73
TILEPIC 200 120 13987
TILEPIC 205 142 22330
DTEXT 50 30 95  VENDOR CONTROL
BUTTON 30 60 5601 5605 1 0 110
DTEXT 50 60 342 SELL ITEMS
BUTTON 140 60 5601 5605 1 0 115
DTEXT 160 60 342 BUY ITEMS
BUTTON 30 80 5601 5605 1 0 120
DTEXT 50 80 342 SELL PRICE
BUTTON 140 80 5601 5605 1 0 125
DTEXT 160 80 342 BUY PRICE
BUTTON 45 120 5601 5605 0 2 0
DTEXT 65 120 343 CASH MANAGEMENT
BUTTON 45 150 5601 5605 0 3 0
DTEXT 65 150 343 VENDOR MANAGEMENT
IF <SERV.UID.<SRC.CTAG.LastVendorUsedUID>.TAG.ShopOpen>
	BUTTON 65 188 2154 2154 1 0 130
	DTEXT 100 192 63 SHOP OPEN
	TILEPIC 210 187 2588
ELSE
	BUTTON 65 188 2151 2151 1 0 130
	DTEXT 100 192 34 SHOP CLOSED
	TILEPIC 210 187 2589
ENDIF

PAGE 2
RESIZEPIC 25 85 9500 220 110
BUTTON 30 30 5601 5605 0 0 0
DTEXT 50 30 342 CASH MANAGMENT
TILEPIC 50 54 3823 //Gold Pile
DTEXT 95 60 51 Cash Total : <EVAL <SERV.UID.<SRC.CTAG.LastVendorUsedUID>.VENDGOLD>>gp
DTEXT 65 90 59 TAX TO BE DEDUCTED
DTEXT 50 115 55 Vendor Tax : <EVAL VendorsWagePercentage>%
IF <EVAL <REGION.TAG.PlayersShop>> =1
	DTEXT 50 135 55 Town Tax  : <EVAL <SERV.UID.<UID.<REGION.TAG0.ShopControlUID>.TAG.TownControlStoneUID>.TAG.TownTaxPercentage>>%
ENDIF
IF <EVAL <REGION.TAG.PlayersShop>> =1
	DTEXT 50 155 55 Keep Tax  : <EVAL <SERV.UID.<UID.<REGION.TAG0.ShopControlUID>.TAG.TownControlStoneUID>.TAG.KeepTaxPercentage>>%
ENDIF
BUTTON 207 168 9027 9026 1 0 210
DTEXT 196 148 63 Collect
BUTTON 180 202 5603 5607 0 1 0
DTEXT 200 200 342 BACK

PAGE 3
BUTTON 30 30 5601 5605 0 0 0
DTEXT 50 30 342 VENDOR MANAGMENT
TILEPIC 30 55 2537 // Cake
TILEPIC 25 95 16159 // Dresser
TILEPIC 25 145 8454 // Man
BUTTON 70 57 9027 9026 1 0 310
DTEXT 95 55 55 Feed
BUTTON 70 87 9027 9026 1 0 330
DTEXT 95 85 55 Dress
BUTTON 70 117 9027 9026 1 0 320
DTEXT 95 115 55 Undress
BUTTON 70 147 9027 9026 1 0 340
DTEXT 95 145 55 Rename
BUTTON 70 177 9027 9026 1 0 350
DTEXT 95 175 55 Redeed
DTEXT 150 55 63 Food : <EVAL <SERV.UID.<SRC.CTAG.LastVendorUsedUID>.FOOD>>
DTEXT 150 145 95 <SERV.UID.<SRC.CTAG.LastVendorUsedUID>.NAME>
DTEXTENTRY 150 145 95 50 63 3
BUTTON 175 192 5603 5607 0 1 0
DTEXT 195 190 342 BACK

[DIALOG d_VendorMenu BUTTON]
ONBUTTON=110
IF (<SERV.UID.<SRC.CTAG.LastVendorUsedUID>.FINDID.i_am_owned_by_this_player.MORE1> == <SRC.UID>)
	FINDLAYER.21.OPEN
	SYSMESSAGE @63,,1 Place the Item into the Vendor Sell Box
	SERV.UID.<SRC.CTAG.LastVendorUsedUID>.BANK 26
	DIALOG d_VendorMenu
	RETURN 1	
ENDIF

ONBUTTON=115
IF (<SERV.UID.<SRC.CTAG.LastVendorUsedUID>.FINDID.i_am_owned_by_this_player.MORE1> == <SRC.UID>)
	FINDLAYER.21.OPEN
	SYSMESSAGE @63,,1 Place the Item into the Vendor Buy Box
	SERV.UID.<SRC.CTAG.LastVendorUsedUID>.BANK 28
	DIALOG d_VendorMenu
	RETURN 1	
ENDIF	

ONBUTTON=120
IF (<SERV.UID.<SRC.CTAG.LastVendorUsedUID>.FINDID.i_am_owned_by_this_player.MORE1> == <SRC.UID>)
	SRC.SYSMESSAGE @1462,,1 Target the Item you wish to Price
	SERV.UID.<SRC.CTAG.LastVendorUsedUID>.FINDLAYER.26.OPEN
	SRC.TARGETF SelectItemToPriceForSale
	RETURN 1
ENDIF

ONBUTTON=125
IF (<SERV.UID.<SRC.CTAG.LastVendorUsedUID>.FINDID.i_am_owned_by_this_player.MORE1> == <SRC.UID>)
	SRC.SYSMESSAGE @1462,,1 Target the Item you wish to Price
	SERV.UID.<SRC.CTAG.LastVendorUsedUID>.FINDLAYER.28.OPEN
	SRC.TARGETF SelectItemToPriceToBuy
	RETURN 1
ENDIF

ONBUTTON=130
IF !<SERV.UID.<SRC.CTAG.LastVendorUsedUID>.TAG.ShopOpen>
	SERV.UID.<SRC.CTAG.LastVendorUsedUID>.TAG.ShopOpen=1
	SERV.UID.<SRC.CTAG.LastVendorUsedUID>.SAY @63,,1 The shop is Open
ELSE
	SERV.UID.<SRC.CTAG.LastVendorUsedUID>.TAG.ShopOpen=0
	SERV.UID.<SRC.CTAG.LastVendorUsedUID>.SAY @63,,1 The shop is Closed
ENDIF
DIALOG d_VendorMenu

ONBUTTON=210
LOCAL.CashTotal=0
IF (<SERV.UID.<SRC.CTAG.LastVendorUsedUID>.FINDID.i_am_owned_by_this_player.MORE1> == <SRC.UID>)
	IF (<EVAL <SERV.UID.<SRC.CTAG.LastVendorUsedUID>.VENDGOLD>> > 1)
		CALL f_taxdetuction <EVAL <SERV.UID.<SRC.CTAG.LastVendorUsedUID>.VENDGOLD> - 1 >
		SERV.UID.<SRC.CTAG.LastVendorUsedUID>.GOLD=<EVAL <LOCAL.VendorTaxB>/1000>
		SERV.UID.<SRC.CTAG.LastVendorUsedUID>.VENDGOLD=1
	ELSE
		SRC.SYSMESSAGE @0029,,1 The vendor has no money!
		SERV.UID.<SRC.CTAG.LastVendorUsedUID>.SAY @63,,1 Not my last coin!
		SERV.UID.<SRC.CTAG.LastVendorUsedUID>.EMOTE Crying
	ENDIF		
ENDIF
SRC.DIALOG d_VendorMenu 2

ONBUTTON=310
IF (<SERV.UID.<SRC.CTAG.LastVendorUsedUID>.FINDID.i_am_owned_by_this_player.MORE1> == <SRC.UID>)
	IF (<SRC.FINDTYPE.t_food>)
		IF !(<SERV.UID.<SRC.CTAG.LastVendorUsedUID>.FOOD> > 29)
			SERV.UID.<SRC.CTAG.LastVendorUsedUID>.FOOD=<EVAL <SERV.UID.<SRC.CTAG.LastVendorUsedUID>.FOOD>+1>
			SERV.UID.<SRC.CTAG.LastVendorUsedUID>.SAY @63,,1,,1 Yummy! <SRC.FINDTYPE.t_food.NAME> Thank you!
			SERV.UID.<SRC.CTAG.LastVendorUsedUID>.EMOTE eat some <SRC.FINDTYPE.t_food.NAME>
			CONSUME 1 <SRC.FINDTYPE.t_food.BASEID>
		ELIF
			SERV.UID.<SRC.CTAG.LastVendorUsedUID>.SAY @0029,,1 I'm stuffed thanks!
		ENDIF
	ELIF (<SRC.FINDTYPE.t_fruit>)
		IF !(<SERV.UID.<SRC.CTAG.LastVendorUsedUID>.FOOD> > 30)
			SERV.UID.<SRC.CTAG.LastVendorUsedUID>.FOOD=<EVAL <SERV.UID.<SRC.CTAG.LastVendorUsedUID>.FOOD>+1>
			SERV.UID.<SRC.CTAG.LastVendorUsedUID>.SAY @63,,1,,1 Yummy! <SRC.FINDTYPE.t_fruit.NAME> Thank you!
			//SERV.UID.<SRC.CTAG.LastVendorUsedUID>.EMOTE eat some <SRC.FINDTYPE.t_fruit.NAME>
			LOCAL.TempUID=<SRC.FINDTYPE.t_fruit.UID>
			//SERV.UID.<SRC.CTAG.LastVendorUsedUID>.CONSUME 1 <SRC.FINDTYPE.t_fruit.BASEID>
			SERV.UID.<SRC.CTAG.LastVendorUsedUID>.<SERV.UID.<LOCAL.TempUID>.DClick
		ELIF
			SERV.UID.<SRC.CTAG.LastVendorUsedUID>.SAY @0029,,1  I'm stuffed thanks!
		ENDIF
	ELSE
		SRC.SYSMESSAGE @0029,,1 You have no food to give <SERV.UID.<SRC.CTAG.LastVendorUsedUID>.NAME>
	ENDIF
ENDIF
SRC.DIALOG d_VendorMenu 3

ONBUTTON=320
IF (<SERV.UID.<SRC.CTAG.LastVendorUsedUID>.FINDID.i_am_owned_by_this_player.MORE1> == <SRC.UID>)
	SERV.UID.<SRC.CTAG.LastVendorUsedUID>.UNEQUIPALL
	SERV.UID.<SRC.CTAG.LastVendorUsedUID>.SAY @63,,1,,1 oooh
ENDIF
SRC.DIALOG d_VendorMenu 3

ONBUTTON=330
IF (<SERV.UID.<SRC.CTAG.LastVendorUsedUID>.FINDID.i_am_owned_by_this_player.MORE1> == <SRC.UID>)
	SRC.TARGETF ChangeVendorsClothing <SRC.CTAG.LastVendorUsedUID>
ENDIF
SRC.DIALOG d_VendorMenu 3

ONBUTTON=340
IF (<SERV.UID.<SRC.CTAG.LastVendorUsedUID>.FINDID.i_am_owned_by_this_player.MORE1> == <SRC.UID>)

		SERV.UID.<SRC.CTAG.LastVendorUsedUID>.NAME=<ARGTXT[3]>
		SERV.UID.<SRC.CTAG.LastVendorUsedUID>.UPDATEX

ENDIF
SRC.DIALOG d_VendorMenu 3

ONBUTTON=350
IF (<SERV.UID.<SRC.CTAG.LastVendorUsedUID>.FINDID.i_am_owned_by_this_player.MORE1> == <SRC.UID>)||(<SRC.ISGM>)
	IF !(<EVAL <SERV.UID.<SRC.CTAG.LastVendorUsedUID>.TAG.VendorsGold>> > 0)
		RedeedVendor <SRC.CTAG.LastVendorUsedUID>
		SRC.SYSMESSAGE @63,,1 Vendors Items are in your Bank.
		RETURN 1
	ELSE
		SRC.SYSMESSAGE @1462,,1 Remove the Vendors Gold First.
		SERV.UID.<SRC.CTAG.LastVendorUsedUID>.SAY Remove My Gold First!
		RETURN 1
	ENDIF	
ENDIF

[DIALOG d_SelectEmploymentType]
50,50
PAGE 0
RESIZEPIC 0 0 5120 230 210
RESIZEPIC 20 20 5054 190 170

PAGE 1
BUTTON 30 30 5601 5605 1 0 10
DTEXT 50 30 342 HOUSE VENDOR
BUTTON 30 60 5601 5605 1 0 20
DTEXT 50 60 342 SHOP VENDOR
BUTTON 30 90 5601 5605 1 0 30
DTEXT 50 90 342 HOUSE GUARD
BUTTON 30 120 5601 5605 1 0 40
DTEXT 50 120 342 KEEP GUARD
BUTTON 30 150 5601 5605 1 0 50
DTEXT 50 150 342 CANNONEER

[DIALOG d_SelectEmploymentType BUTTON]
ONBUTTON=10
IF (<SERV.UID.<REGION.TAG0.SignUID>.TAG.OwnerUID> == <SRC.UID>)	
	SRC.TARGETFG PlaceHouseVendor
ELSE
	SRC.SYSMESSAGE @1462,,1 The House Vendor must be placed inside your shop!
ENDIF

ONBUTTON=20
IF (<SERV.UID.<REGION.TAG0.ShopControlUID>.TAG.OwnersUID> == <SRC.UID>)
	SRC.TARGETFG PlaceShopVendor
ELSE
	SRC.SYSMESSAGE @1462,,1 The Shop Vendor must be placed inside your shop!
ENDIF

ONBUTTON=30

ONBUTTON=40

ONBUTTON=50


[DIALOG PriceBox]
50,50
PAGE 0
RESIZEPIC 0 0 5120 250 170
RESIZEPIC 20 20 5054 210 130
PAGE 1
DTEXT 50 30 55 <CTAG.ItemToPriceNAME>
TILEPICHUE 100 60 <SERV.UID.<CTAG.ItemToPriceUID>.ID> <EVAL <SERV.UID.<CTAG.ItemToPriceUID>.COLOR>>
DTEXT 50 100 55 PRICE:
DTEXTENTRY 90 100 50 20 1152 1
BUTTON 95 125 12000 12001 1 0 10
PAGE 2
DTEXT 50 30 55 <CTAG.ItemToPriceNAME>
TILEPICHUE 100 60 <SERV.UID.<CTAG.ItemToPriceUID>.ID> <EVAL <SERV.UID.<CTAG.ItemToPriceUID>.COLOR>>
DTEXT 50 100 55 PRICE:
DTEXT 90 100 1354 <EVAL <CTAG.LastItemForSalePrice>>
BUTTON 95 125 12012 12013 1 0 20

[DIALOG PriceBox BUTTON]
ONBUTTON=10
	IF <EVAL <ARGTXT[1]>> > 0 && <EVAL <ARGTXT[1]>> < 100000000)
		SRC.CTAG.LastItemForSalePrice=<ARGTXT[1]>
		SRC.SDIALOG PriceBox 2
	ELSE
		SRC.SYSMESSAGE @1462,,1 Try a Number and Less Than 100 Million!
	ENDIF
	
ONBUTTON=20
	SERV.UID.<SRC.CTAG.ItemToPriceUID>.PRICE=<EVAL <SRC.CTAG.LastItemForSalePrice>>
	SERV.UID.<SRC.CTAG.ItemToPriceUID>.TAG.PRICE=<EVAL <SRC.CTAG.LastItemForSalePrice>>
	SERV.UID.<SRC.CTAG.LastVendorUsedUID>.SAY @63,,1,,1 Pricing <SERV.UID.<SRC.CTAG.ItemToPriceUID>.NAME> as <EVAL <SRC.CTAG.LastItemForSalePrice>>

//[FUNCTION VendorMsgToOwner]
//CTAG.TempMsg=<ARGV[0]>
//OpenVendorMsgDialog
//[FUNCTION OpenVendorMsgDialog]
//SERV.B @35 SendDialog <NAME>
//DIALOG d_VendorToOwner
//[DIALOG d_VendorToOwner]
//1,500
//NOMOVE
//PAGE 0
//RESIZEPIC 0 0 5120 500 100
//RESIZEPIC 20 20 5054 460 60
//dhtmlgump 30 30 440 25 80 0 <DEF.CENTER> <CTAG.TempMsg> <DEF.CENTER> 
//BUTTON 200 60 12012 12013 1 0 10
//[DIALOG d_VendorToOwner BUTTON]
//ONBUTTON=10
//CTAG.TempMsg=0

[EOF]